/* ===== CLEANED Main.css =====
   Removed duplicate rules, consolidated spinner/keyframes, and grouped modal/loaders.
   Preserved original visual design and all classes used by JS (modal-local-loading,
   global-loading-modal, section-spinner, row-updated, etc.).
*/

/* ===== CSS VARIABLES & THEME ===== */
:root {
  /* Primary Colors */
  --primary-50: #eff6ff;
  --primary-100: #dbeafe;
  --primary-500: #3b82f6;
  --primary-600: #2563eb;
  --primary-700: #1d4ed8;

  /* Semantic Colors */
  --success-500: #22c55e;
  --success-600: #16a34a;
  --warning-500: #f59e0b;
  --danger-500: #ef4444;
  --danger-600: #dc2626;
  --info-500: #0ea5e9;

  /* Neutral Colors */
  --white: #ffffff;
  --gray-50: #f8fafc;
  --gray-100: #f1f5f9;
  --gray-200: #e2e8f0;
  --gray-300: #cbd5e1;
  --gray-400: #94a3b8;
  --gray-500: #64748b;
  --gray-600: #475569;
  --gray-700: #334155;
  --gray-800: #1e293b;
  --gray-900: #0f172a;

  /* Shadows */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);

  /* Border Radius */
  --radius-sm: 0.25rem;
  --radius-base: 0.375rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;

  /* Spacing */
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --space-5: 1.25rem;
  --space-6: 1.5rem;

  /* Typography */
  --text-xs: 0.75rem;
  --text-sm: 0.875rem;
  --text-base: 1rem;
  --text-lg: 1.125rem;
  --text-xl: 1.25rem;

  /* Transitions */
  --transition-fast: 0.15s ease;
}

/* ===== BASE STYLES ===== */
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
  background: var(--gray-50);
  color: var(--gray-800);
  line-height: 1.5;
}

/* ===== LAYOUT COMPONENTS ===== */
.top-menu {
  background: var(--white);
  padding: var(--space-3) var(--space-5);
  box-shadow: var(--shadow-md);
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: sticky;
  top: 0;
  z-index: 1000;
  border-bottom: 1px solid var(--gray-200);
}

.menu-left { display: flex; align-items: center; }

.add-app-btn {
  background: var(--primary-600);
  color: var(--white);
  border: none;
  padding: var(--space-2) var(--space-4);
  border-radius: var(--radius-md);
  cursor: pointer;
  font-size: var(--text-sm);
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: var(--space-2);
}
.add-app-btn:hover { background: var(--primary-700); }

.app-title {
  font-weight: 700;
  font-size: var(--text-xl);
  color: var(--primary-600);
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.user-info { display:flex; align-items:center; gap:var(--space-3); }
.date-display { color: var(--gray-600); font-size: var(--text-sm); }

.user-notification-container { position: relative; display:flex; align-items:center; gap:var(--space-2); }

#logged-in-user {
  color: var(--gray-700);
  font-weight: 600;
  font-size: var(--text-sm);
  padding: var(--space-1) var(--space-2);
  background: var(--gray-100);
  border-radius: var(--radius-md);
}

.notification-badge {
  position: absolute;
  top: -4px;
  right: -4px;
  background: var(--danger-500);
  color: var(--white);
  border-radius: 50%;
  width: 16px;
  height: 16px;
  font-size: var(--text-xs);
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 2px solid var(--white);
}

.logout-btn {
  background: none;
  border: none;
  cursor: pointer;
  font-size: var(--text-base);
  color: var(--gray-600);
  padding: var(--space-1);
  border-radius: var(--radius-base);
}
.logout-btn:hover { color: var(--danger-500); }

/* Main Container & Sidebar */
.container { display:flex; min-height: calc(100vh - 64px); }

.side-menu {
  width: 240px;
  background: var(--white);
  padding: var(--space-4) 0;
  box-shadow: var(--shadow-sm);
  height: calc(100vh - 64px);
  position: sticky;
  top: 64px;
  overflow-y: auto;
  border-right: 1px solid var(--gray-200);
}

.menu-section { padding: 0 var(--space-4); margin-bottom: var(--space-5); }
.menu-title {
  font-size: var(--text-xs);
  font-weight: 600;
  color: var(--gray-600);
  margin-bottom: var(--space-3);
  padding-bottom: var(--space-2);
  border-bottom: 1px solid var(--gray-200);
  display:flex; align-items:center; gap:var(--space-2);
  text-transform:uppercase;
}

.menu-btn {
  display:flex; justify-content:space-between; align-items:center;
  width:100%; text-align:left; background:none; border:none;
  padding: var(--space-2) var(--space-3); margin:1px 0; cursor:pointer;
  border-radius: var(--radius-md); transition:var(--transition-fast);
  font-size: var(--text-sm); color: var(--gray-700);
}
.menu-btn:hover { background: var(--gray-50); color: var(--primary-600); }
.menu-btn.active { background: var(--primary-600); color: var(--white); }
.menu-btn i { width: 16px; text-align:center; }

.badge {
  background: var(--danger-500);
  color: var(--white);
  padding: 1px 6px;
  border-radius: 12px;
  font-size: var(--text-xs);
  font-weight: 700;
  min-width: 20px;
  text-align: center;
}
.menu-btn.active .badge { background: rgba(255,255,255,0.3); }

/* Main Content Area */
.main-content { flex:1; padding: var(--space-4); overflow-y:auto; }

.content-section {
  background: var(--white);
  border-radius: var(--radius-lg);
  padding: 0;
  box-shadow: var(--shadow-sm);
  margin-bottom: var(--space-4);
  display: none;
  border: 1px solid var(--gray-200);
}
.content-section.active { display:block; }

.section-header {
  padding: var(--space-4) var(--space-5);
  border-bottom: 1px solid var(--gray-200);
  display:flex; justify-content:space-between; align-items:center;
  background: var(--gray-50);
}
.section-header h2 {
  color: var(--gray-900);
  font-size: var(--text-lg);
  font-weight:600;
  display:flex; align-items:center; gap:var(--space-2);
}

.app-number-display { font-size: var(--text-base); color: var(--primary-600); margin-left: var(--space-4); }
.section-actions { display:flex; gap:var(--space-2); }

/* ===== BUTTON STYLES ===== */
.btn-primary {
  background: var(--primary-600);
  color: var(--white);
  border: none;
  padding: var(--space-2) var(--space-4);
  border-radius: var(--radius-md);
  cursor: pointer;
  font-size: var(--text-sm);
  font-weight: 600;
  display:flex; align-items:center; gap:var(--space-2);
}
.btn-primary:hover { background: var(--primary-700); }

.btn-secondary {
  background: var(--gray-100);
  color: var(--gray-700);
  border: 1px solid var(--gray-300);
  padding: var(--space-2) var(--space-4);
  border-radius: var(--radius-md);
  cursor: pointer;
  font-size: var(--text-sm);
  font-weight: 600;
}
.btn-secondary:hover { background: var(--gray-200); }

.btn-outline {
  background: transparent;
  color: var(--primary-600);
  border: 1px solid var(--primary-500);
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-md);
  cursor: pointer;
  font-size: var(--text-sm);
  display:flex; align-items:center; gap:var(--space-2);
}
.btn-outline:hover { background: var(--primary-500); color: var(--white); }

.btn-template { background: var(--success-500); color: var(--white); border:none; padding:var(--space-1) var(--space-2); border-radius: var(--radius-base); font-size:var(--text-xs); font-weight:600; margin-top: var(--space-1); }
.btn-template:hover { background: var(--success-600); }

/* ===== FORM STYLES ===== */
#application-form { padding: var(--space-5); }

.form-grid { display:grid; grid-template-columns:1fr 1fr; gap:var(--space-4); margin-bottom:var(--space-4); }

.form-group { margin-bottom: var(--space-4); }
.form-label { display:block; margin-bottom: var(--space-1); font-weight:600; color:var(--gray-700); font-size:var(--text-sm); }
.form-input {
  width:100%; padding: var(--space-2) var(--space-3); border:1px solid var(--gray-300); border-radius:var(--radius-md); font-size:var(--text-sm); background:var(--white);
}
.form-input:focus { outline:none; border-color:var(--primary-500); }

/* Upload Section */
.uploads-section { margin: var(--space-5) 0; }
.upload-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap:var(--space-3); }
.reduced-upload-grid { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap:var(--space-2); }

.upload-card {
  border: 2px dashed var(--gray-300);
  padding: var(--space-3);
  text-align: center;
  border-radius: var(--radius-md);
  cursor: pointer;
  background: var(--gray-50);
}
.small-upload-card { padding: var(--space-2); min-width:100px; max-width:140px; margin:0 auto; }
.upload-card:hover { border-color: var(--primary-500); background: var(--primary-50); }

.upload-icon { font-size: 1.5rem; color: var(--primary-500); margin-bottom: var(--space-2); }
.upload-card h4 { margin-bottom: var(--space-1); color: var(--gray-800); font-size:var(--text-sm); }
.upload-card p { color:var(--gray-600); font-size:var(--text-xs); margin-bottom:var(--space-2); }

.file-name {
  font-size: var(--text-xs);
  color: var(--gray-600);
  background: var(--white);
  padding: 2px 4px;
  border-radius: var(--radius-base);
  display:inline-block;
  border:1px solid var(--gray-200);
  max-width:100%;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* ===== TABLE STYLES ===== */
.table-container { padding:0 var(--space-5) var(--space-4) var(--space-5); overflow-x:auto; }

.applications-table {
  width:100%; border-collapse:collapse; background:var(--white); border-radius:var(--radius-md);
  font-size:var(--text-sm); border:1px solid var(--gray-200);
}
.applications-table th {
  background:var(--gray-50); padding:var(--space-2) var(--space-3); text-align:left; font-weight:600; color:var(--gray-700); border-bottom:1px solid var(--gray-300);
  font-size:var(--text-sm);
}
.applications-table td { padding:var(--space-2) var(--space-3); border-bottom:1px solid var(--gray-200); font-size:var(--text-sm); vertical-align:middle; }
.applications-table tr:last-child td { border-bottom:none; }
.applications-table tr:hover { background: var(--primary-50); }

.app-number { font-weight:600; color:var(--primary-600); }
.app-number-link { color: inherit; text-decoration: none; }
.app-number-link:hover { text-decoration: underline; }

.applicant-name { font-weight:500; }
.amount { font-weight:700; color:var(--success-600); }
.date { color:var(--gray-600); }
.action-by { color:var(--gray-700); }

/* Status Badges and Action Buttons */
.status-badge { padding:2px 8px; border-radius:12px; font-size:var(--text-xs); font-weight:700; display:inline-block; }
.status-new { background:#dbeafe; color:#1e40af; }
.status-pending { background:#fef3c7; color:#92400e; }
.status-approved { background:#d1fae5; color:#065f46; }
.status-draft { background:#f3f4f6; color:#374151; }

.actions { text-align:center; white-space:nowrap; }
.btn-icon { background:none; border:none; padding:var(--space-1); margin:0 2px; border-radius:var(--radius-base); cursor:pointer; font-size:var(--text-sm); color:var(--gray-600); }
.btn-icon:hover { background:var(--gray-100); }
.btn-view:hover { color: var(--primary-600); }
.btn-edit:hover { color: var(--warning-500); }
.btn-delete:hover { color: var(--danger-500); }

/* ===== APPLICATION DETAILS ===== */
.app-details-container { padding: var(--space-5); }
.app-details-grid { display:grid; gap:var(--space-4); }

.detail-card, .documents-card {
  background: var(--gray-50); border-radius: var(--radius-md); padding:var(--space-4); border:1px solid var(--gray-200);
}
.detail-card h3, .documents-card h3 { margin-bottom:var(--space-3); color:var(--gray-900); display:flex; align-items:center; gap:var(--space-2); font-size:var(--text-base); }

.detail-row { display:grid; grid-template-columns:160px 1fr; align-items:center; padding: var(--space-2) 0; border-bottom:1px solid var(--gray-200); }
.detail-row:last-child { border-bottom:none; }
.detail-row label { font-weight:600; color:var(--gray-700); font-size:var(--text-sm); }

.app-number-value { font-weight:700; color:var(--primary-600); font-size:var(--text-base); }
.amount-value { font-weight:700; color:var(--success-600); font-size:var(--text-base); }

/* Documents Grid */
.documents-grid { display:grid; gap:var(--space-3); }
.flex-documents-grid { display:flex; flex-wrap:wrap; gap:var(--space-3); }
.flex-documents-grid .document-card { flex:1 1 calc(50% - var(--space-3)); min-width:240px; max-width:100%; }

.document-card {
  display:flex; align-items:center; gap:var(--space-3); padding:var(--space-3); background:var(--white); border-radius:var(--radius-md); border:1px solid var(--gray-200);
}
.doc-icon { width:40px; height:40px; background:var(--primary-500); border-radius:var(--radius-base); display:flex; align-items:center; justify-content:center; color:var(--white); font-size:var(--text-base); flex-shrink:0; }
.doc-info { flex:1; min-width:0; }
.doc-info h4 { margin:0 0 2px 0; color:var(--gray-800); font-size:var(--text-sm); }
.doc-name { margin:0; color:var(--gray-600); font-size:var(--text-xs); }
.doc-actions { margin-left:auto; display:flex; gap:var(--space-1); flex-shrink:0; }

/* ===== MODAL STYLES ===== */
.modal-overlay {
  display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:3000; justify-content:center; align-items:center;
}
.modal-message { background:var(--white); padding:var(--space-5); border-radius:var(--radius-lg); box-shadow:var(--shadow-lg); text-align:center; min-width:300px; }

/* Center modal buttons */
.modal-message .form-actions { display:flex; justify-content:center; width:100%; margin-top:var(--space-3); padding-top:0; border-top:none; }
#success-modal .btn-primary { display:block; margin:0 auto; }

/* Loading Overlay (legacy fallback) */
.loading-overlay {
  display:none; position:fixed; top:0; left:0; width:100%; height:100%;
  background: rgba(255,255,255,0.9);
  z-index:2000; justify-content:center; align-items:center; color:var(--white);
}
.loading-overlay .spinner {
  border:4px solid rgba(0,0,0,0.1);
  border-radius:50%;
  border-top:4px solid var(--primary-600);
  width:40px; height:40px; animation:spin 1s linear infinite; margin-bottom:10px;
}

/* ===== GENERIC SPINNER / KEYFRAMES ===== */
/* Use single definition for spinner animation */
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Base spinner variants used throughout the app */
.spinner { border-radius:50%; }
.spinner.large { border:5px solid rgba(0,0,0,0.08); border-top:5px solid var(--primary-600); width:48px; height:48px; animation:spin 1s linear infinite; }
.spinner.small { border:3px solid rgba(0,0,0,0.08); border-top:3px solid var(--primary-600); width:28px; height:28px; animation:spin 1s linear infinite; }
.spinner-inline { width:14px; height:14px; border:2px solid rgba(0,0,0,0.08); border-top:2px solid var(--primary-600); border-radius:50%; animation:spin 1s linear infinite; display:inline-block; vertical-align:middle; }

/* ===== Modal-local loading (centered card inside modal-content) ===== */
.modal-local-loading {
  position: absolute;
  inset: 0;
  background: rgba(255,255,255,0.88);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  z-index: 4000;
  pointer-events: auto;
  border-radius: 8px;
  text-align: center;
}
.modal-local-loading .modal-local-card {
  background: var(--white);
  padding: 16px 20px;
  border-radius: 10px;
  box-shadow: var(--shadow-lg);
  display:flex; flex-direction:column; align-items:center; gap:10px; min-width:200px; max-width:88%; text-align:center;
}
.modal-local-loading .modal-local-card .spinner.large { width:44px; height:44px; border-top:5px solid var(--primary-600); }
.modal-local-loading .modal-local-message { color:var(--gray-700); font-weight:600; font-size:0.98rem; }

/* ===== Global loading modal (for full-screen blocking) ===== */
.global-loading-modal {
  display:none; position:fixed; inset:0; z-index:5000; align-items:center; justify-content:center;
}
.global-loading-modal .global-loading-backdrop { position:absolute; inset:0; background: rgba(0,0,0,0.35); backdrop-filter: blur(1px); pointer-events:auto; }
.global-loading-modal .global-loading-card {
  position:relative; z-index:5001; background:var(--white); padding:20px 26px; border-radius:10px; box-shadow:var(--shadow-lg);
  display:flex; flex-direction:column; align-items:center; gap:12px; min-width:220px; max-width:90%; text-align:center;
}
.global-loading-modal .global-loading-message { color:var(--gray-700); font-weight:600; font-size:1rem; }
.global-loading-modal .spinner.large { width:48px; height:48px; }

/* ===== UTILITY CLASSES ===== */
.loading, .no-data, .error { text-align:center; padding:var(--space-4); color:var(--gray-500); }
.error { color: var(--danger-600); }
.no-data { color: var(--gray-500); }

/* Inline/section spinner for headers */
.section-spinner {
  display:inline-flex; align-items:center; gap:8px; color:var(--gray-600); font-size:0.9rem; margin-left:8px;
}
.section-spinner .spinner-inline { width:14px; height:14px; border:2px solid rgba(0,0,0,0.08); border-top:2px solid var(--primary-600); border-radius:50%; animation:spin 1s linear infinite; }

/* Row updated highlight animation */
.row-updated { animation: highlight-row 1.2s ease; }
@keyframes highlight-row {
  0% { background: rgba(250,244,195,0.95); }
  40% { background: rgba(250,244,195,0.6); }
  100% { background: transparent; }
}

/* ===== APPLICATION DETAILS (compact/responsive) ===== */
/* Responsive and compact styles reused in modals and review */
.app-details-compact { display:flex; flex-direction:column; gap:var(--space-4); }
.detail-grid-compact { display:flex; flex-direction:column; gap:var(--space-3); }
.detail-row-compact { display:flex; align-items:center; padding:var(--space-2) 0; border-bottom:1px solid var(--gray-200); }
.detail-row-compact:last-child { border-bottom:none; }
.detail-label-compact { flex:0 0 150px; font-weight:600; color:var(--gray-700); font-size:var(--text-sm); }
.detail-value-compact { flex:1; font-size:var(--text-sm); color:var(--gray-800); }

/* Document list compact */
.documents-list-compact { display:flex; flex-direction:column; gap:var(--space-2); }
.document-link-compact { display:flex; align-items:center; gap:var(--space-2); padding:var(--space-2); background:var(--white); border-radius:var(--radius-md); border:1px solid var(--gray-200); }
.document-icon { color:var(--primary-500); font-size:var(--text-base); width:20px; text-align:center; }
.document-link { color:var(--primary-600); text-decoration:none; font-weight:500; font-size:var(--text-sm); }
.document-link:hover { text-decoration:underline; }

/* Actions section */
.actions-section { margin-top:var(--space-4); padding-top:var(--space-4); border-top:1px solid var(--gray-200); display:flex; justify-content:flex-end; }

/* No documents */
.no-documents { color:var(--gray-500); font-style:italic; text-align:center; padding:var(--space-3); }

/* Review modal sizing */
.large-modal { max-width:800px; max-height:90vh; overflow-y:auto; }

/* Login Page Styles (unchanged) */
.login-page { min-height:100vh; display:flex; align-items:center; justify-content:center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding:20px; }
.login-container { background:white; border-radius:10px; box-shadow:0 20px 40px rgba(0,0,0,0.1); width:100%; max-width:400px; padding:40px; text-align:center; }
.login-logo { font-size:2.5rem; color:#2563eb; margin-bottom:20px; }
.login-title { font-size:1.5rem; color:#333; margin-bottom:10px; font-weight:600; }
.login-subtitle { color:#666; margin-bottom:30px; font-size:0.9rem; }
.login-form { text-align:left; }
.login-form .form-group { margin-bottom:20px; }
.login-form .form-label { display:block; margin-bottom:8px; color:#555; font-weight:500; }
.login-form .form-input { width:100%; padding:12px 15px; border:2px solid #e5e7eb; border-radius:6px; font-size:1rem; transition:border-color 0.3s; box-sizing:border-box; }
.login-form .form-input:focus { outline:none; border-color:#2563eb; }
.login-btn { width:100%; padding:14px; background:#2563eb; color:white; border:none; border-radius:6px; font-size:1rem; font-weight:600; cursor:pointer; transition:background 0.3s; margin-top:10px; }
.login-btn:hover { background:#1d4ed8; }
.login-btn:active { transform:translateY(1px); }
.login-footer { margin-top:30px; color:#666; font-size:0.85rem; }

/* Hide dashboard content when not logged in */
.dashboard-content { display:none; }
.logged-in .dashboard-content { display:block; }
.logged-in .login-page { display:none; }

/* ===== Modal / Review / Upload variants (from newApps/viewApps) ===== */
/* Keep modal-specific helper classes used by newApps/viewApps */
.modal-local-card { background:var(--white); padding:16px 20px; border-radius:10px; box-shadow:var(--shadow-lg); display:flex; flex-direction:column; align-items:center; gap:10px; min-width:200px; max-width:88%; text-align:center; }
.modal-local-message { color:var(--gray-700); font-weight:600; font-size:0.98rem; }

/* Small utilities used in multiple places */
.loading-indicator { text-align:center; padding:10px; color:#666; font-style:italic; }
table[aria-busy="true"] { position:relative; }
table[aria-busy="true"]::after {
  content: "Updating...";
  position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
  background: rgba(255,255,255,0.9); padding:5px 10px; border-radius:4px; font-size:12px; color:#666; z-index:1;
}

/* Small responsive adjustments */
@media (max-width: 768px) {
  .container { flex-direction: column; }
  .side-menu { width:100%; height:auto; position:static; }
  .form-grid { grid-template-columns:1fr; }
  .flex-documents-grid .document-card { flex-basis:100%; }
  .section-header { padding:var(--space-3); flex-direction:column; align-items:flex-start; gap:var(--space-2); }
  .form-actions { flex-direction:column; }
  .table-container { padding:0 var(--space-3) var(--space-3) var(--space-3); }
  .detail-row { grid-template-columns:1fr; gap:2px; }
  .document-card { flex-direction:column; text-align:center; }
  .doc-actions { margin-left:0; margin-top:var(--space-2); }
  .top-menu { flex-wrap:wrap; gap:var(--space-2); }
  .app-title { order:1; flex:1; }
  .menu-left { order:2; }
  .user-info { order:3; flex:1 0 100%; justify-content:space-between; margin-top:var(--space-2); }
}

/* Extra small */
@media (max-width: 480px) {
  .loan-application-modal, .modal-content { padding:10px; }
  .modal-header .close-button { position:absolute; top:10px; right:10px; }
  .back-button, .next-button, .submit-button { width:100%; }
}

/* End of cleaned Main.css */
